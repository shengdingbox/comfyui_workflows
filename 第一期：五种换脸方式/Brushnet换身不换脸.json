{"last_node_id":27,"last_link_id":35,"nodes":[{"id":21,"type":"SAMLoader","pos":[840,690],"size":{"0":315,"1":82},"flags":{},"order":0,"mode":0,"outputs":[{"name":"SAM_MODEL","type":"SAM_MODEL","links":[25],"shape":3,"label":"SAM模型"}],"properties":{"Node name for S&R":"SAMLoader"},"widgets_values":["sam_vit_h_4b8939.pth","Prefer GPU"]},{"id":22,"type":"GroundingDinoModelLoader (segment anything)","pos":[850,820],"size":{"0":315,"1":58},"flags":{},"order":1,"mode":0,"outputs":[{"name":"GROUNDING_DINO_MODEL","type":"GROUNDING_DINO_MODEL","links":[26],"shape":3,"label":"G-Dino模型"}],"properties":{"Node name for S&R":"GroundingDinoModelLoader (segment anything)"},"widgets_values":["GroundingDINO_SwinB (938MB)"]},{"id":20,"type":"GroundingDinoSAMSegment (segment anything)","pos":[1270,710],"size":{"0":330,"1":122},"flags":{},"order":13,"mode":0,"inputs":[{"name":"sam_model","type":"SAM_MODEL","link":25,"label":"SAM模型"},{"name":"grounding_dino_model","type":"GROUNDING_DINO_MODEL","link":26,"label":"G-Dino模型"},{"name":"image","type":"IMAGE","link":27,"label":"图像"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":null,"shape":3,"label":" 图像"},{"name":"MASK","type":"MASK","links":[28],"shape":3,"label":"遮罩","slot_index":1}],"properties":{"Node name for S&R":"GroundingDinoSAMSegment (segment anything)"},"widgets_values":["face",0.3]},{"id":23,"type":"InvertMask","pos":[1630,710],"size":{"0":210,"1":26},"flags":{},"order":14,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":28,"label":"遮罩"}],"outputs":[{"name":"MASK","type":"MASK","links":[29,34],"shape":3,"label":"遮罩","slot_index":0}],"properties":{"Node name for S&R":"InvertMask"}},{"id":10,"type":"BrushNet","pos":[1880,-230],"size":{"0":315,"1":226},"flags":{},"order":15,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":14,"label":"模型"},{"name":"vae","type":"VAE","link":17,"label":"VAE"},{"name":"image","type":"IMAGE","link":24,"label":"图像"},{"name":"mask","type":"MASK","link":29,"label":"遮罩"},{"name":"brushnet","type":"BRMODEL","link":10,"label":"BrushNet"},{"name":"positive","type":"CONDITIONING","link":30,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":31,"label":"负面条件"}],"outputs":[{"name":"model","type":"MODEL","links":[15],"shape":3,"label":"模型","slot_index":0},{"name":"positive","type":"CONDITIONING","links":[19],"shape":3,"label":"正面条件","slot_index":1},{"name":"negative","type":"CONDITIONING","links":[20],"shape":3,"label":"负面条件","slot_index":2},{"name":"latent","type":"LATENT","links":[18],"shape":3,"label":"Latent","slot_index":3}],"properties":{"Node name for S&R":"BrushNet"},"widgets_values":[1,0,10000]},{"id":4,"type":"CheckpointLoaderSimple","pos":[-275,281],"size":{"0":315,"1":98},"flags":{},"order":2,"mode":0,"outputs":[{"name":"MODEL","type":"MODEL","links":[13],"slot_index":0,"label":"模型"},{"name":"CLIP","type":"CLIP","links":[3,5],"slot_index":1,"label":"CLIP"},{"name":"VAE","type":"VAE","links":[8,17],"slot_index":2,"label":"VAE"}],"properties":{"Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["SD1.5\\dreamshaper_8.safetensors"]},{"id":8,"type":"VAEDecode","pos":[2880,59],"size":{"0":210,"1":46},"flags":{},"order":17,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":7,"label":"Latent"},{"name":"vae","type":"VAE","link":8,"label":"VAE"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[32],"slot_index":0,"label":"图像"}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":11,"type":"BrushNetLoader","pos":[1870,-360],"size":{"0":315,"1":82},"flags":{},"order":3,"mode":0,"outputs":[{"name":"brushnet","type":"BRMODEL","links":[10],"shape":3,"label":"BrushNet"}],"properties":{"Node name for S&R":"BrushNetLoader"},"widgets_values":["brushnet\\random_mask_brushnet_ckpt\\diffusion_pytorch_model.safetensors","float16"]},{"id":6,"type":"CLIPTextEncode","pos":[1181,91],"size":{"0":422.84503173828125,"1":164.31304931640625},"flags":{},"order":9,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":3,"label":"CLIP"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[30],"slot_index":0,"label":"条件"}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":[""]},{"id":7,"type":"CLIPTextEncode","pos":[1208,322],"size":{"0":425.27801513671875,"1":180.6060791015625},"flags":{},"order":10,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":5,"label":"CLIP"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[31],"slot_index":0,"label":"条件"}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["text, watermark"]},{"id":12,"type":"IPAdapterAdvanced","pos":[1070,-360],"size":{"0":315,"1":278},"flags":{},"order":12,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":12,"label":"模型"},{"name":"ipadapter","type":"IPADAPTER","link":11,"label":"IPAdapter"},{"name":"image","type":"IMAGE","link":16,"label":"正面图像"},{"name":"image_negative","type":"IMAGE","link":null,"label":"负面图像"},{"name":"attn_mask","type":"MASK","link":null,"label":"关注层遮罩"},{"name":"clip_vision","type":"CLIP_VISION","link":null,"label":"CLIP视觉"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[14],"shape":3,"label":"模型","slot_index":0}],"properties":{"Node name for S&R":"IPAdapterAdvanced"},"widgets_values":[0.8,"linear","concat",0,1,"V only"]},{"id":14,"type":"LoadImage","pos":[272,-352],"size":[315,314.00000762939453],"flags":{},"order":4,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[16],"shape":3,"label":"图像"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["QQ截图20240808154807.png","image"]},{"id":25,"type":"PreviewImage","pos":[2747,701],"size":[570.6013581237166,316.8043330285691],"flags":{},"order":19,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":35,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":15,"type":"LoadImage","pos":[-230,708],"size":[315,314.00002670288086],"flags":{},"order":5,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[23],"shape":3,"label":"图像","slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["00001.png","image"]},{"id":24,"type":"BlendInpaint","pos":[2307,713],"size":{"0":315,"1":142},"flags":{},"order":18,"mode":0,"inputs":[{"name":"inpaint","type":"IMAGE","link":32},{"name":"original","type":"IMAGE","link":33},{"name":"mask","type":"MASK","link":34,"label":"遮罩"},{"name":"origin","type":"VECTOR","link":null}],"outputs":[{"name":"image","type":"IMAGE","links":[35],"shape":3,"label":"图像","slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"BlendInpaint"},"widgets_values":[10,10]},{"id":3,"type":"KSampler","pos":[2325,85],"size":[315,474],"flags":{},"order":16,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":15,"label":"模型"},{"name":"positive","type":"CONDITIONING","link":19,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":20,"label":"负面条件"},{"name":"latent_image","type":"LATENT","link":18,"label":"Latent"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[7],"slot_index":0,"label":"Latent"}],"properties":{"Node name for S&R":"KSampler"},"widgets_values":[248157730645306,"randomize",30,7,"dpmpp_2m","karras",1]},{"id":13,"type":"IPAdapterUnifiedLoader","pos":[692,-351],"size":{"0":315,"1":78},"flags":{},"order":8,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":13,"label":"模型"},{"name":"ipadapter","type":"IPADAPTER","link":null,"label":"IPAdapter"}],"outputs":[{"name":"model","type":"MODEL","links":[12],"shape":3,"label":"模型","slot_index":0},{"name":"ipadapter","type":"IPADAPTER","links":[11],"shape":3,"label":"IPAdapter"}],"properties":{"Node name for S&R":"IPAdapterUnifiedLoader"},"widgets_values":["PLUS (high strength)"]},{"id":26,"type":"Note","pos":[4,-141],"size":[238.75114784205562,82.64462809917313],"flags":{},"order":6,"mode":0,"properties":{"text":""},"widgets_values":["这里上传风格参考图，作为背景"],"color":"#432","bgcolor":"#653"},{"id":19,"type":"ImagePadForOutpaintTargetSize","pos":[262,704],"size":{"0":315,"1":150},"flags":{},"order":11,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":23,"label":"图像"},{"name":"mask","type":"MASK","link":null,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[24,27,33],"shape":3,"label":"图像","slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"ImagePadForOutpaintTargetSize"},"widgets_values":[768,512,0,"nearest-exact"]},{"id":27,"type":"Note","pos":[102,936],"size":{"0":238.7511444091797,"1":82.6446304321289},"flags":{},"order":7,"mode":0,"properties":{"text":""},"widgets_values":["这里上传包含人物脸部的图像，作为人脸参考"],"color":"#432","bgcolor":"#653"}],"links":[[3,4,1,6,0,"CLIP"],[5,4,1,7,0,"CLIP"],[7,3,0,8,0,"LATENT"],[8,4,2,8,1,"VAE"],[10,11,0,10,4,"BRMODEL"],[11,13,1,12,1,"IPADAPTER"],[12,13,0,12,0,"MODEL"],[13,4,0,13,0,"MODEL"],[14,12,0,10,0,"MODEL"],[15,10,0,3,0,"MODEL"],[16,14,0,12,2,"IMAGE"],[17,4,2,10,1,"VAE"],[18,10,3,3,3,"LATENT"],[19,10,1,3,1,"CONDITIONING"],[20,10,2,3,2,"CONDITIONING"],[23,15,0,19,0,"IMAGE"],[24,19,0,10,2,"IMAGE"],[25,21,0,20,0,"SAM_MODEL"],[26,22,0,20,1,"GROUNDING_DINO_MODEL"],[27,19,0,20,2,"IMAGE"],[28,20,1,23,0,"MASK"],[29,23,0,10,3,"MASK"],[30,6,0,10,5,"CONDITIONING"],[31,7,0,10,6,"CONDITIONING"],[32,8,0,24,0,"IMAGE"],[33,19,0,24,1,"IMAGE"],[34,23,0,24,2,"MASK"],[35,24,0,25,0,"IMAGE"]],"groups":[{"title":"Brushnet换身不换脸","bounding":[-295,-452,3704,1542],"color":"#3f789e","font_size":24,"locked":false},{"title":"关注公众号：《AI搞钱社》  或  加微信：tiezhu1666，免费领取超多ai资料！【换脸、变声、ai绘画等等】","bounding":[-299,-596,3689,109],"color":"#b58b2a","font_size":80,"locked":true}],"config":{},"extra":{"workspace_info":{"id":"uqvUZYX7SXiU5M-U2nVPv"},"ds":{"scale":0.40909090909091145,"offset":[872.8258727284023,1403.7176498277872]}},"version":0.4}